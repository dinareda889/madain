<?phpdefined('BASEPATH') or exit('No direct script access allowed');class Web extends CI_Controller{    function __construct()    {        parent::__construct();        $this->load->model(['Web_m']);        $this->load->library('pagination');        if (!$this->session->userdata('site_lang')) {            $this->session->set_userdata('site_lang', 'english');            $this->lang->load('content', 'english');        } else {            $this->lang->load('content', $this->session->userdata('site_lang'));        }        $this->company_data = $this->fungsi->company_data();        $this->about_us = $this->Web_m->get_about_us()[0];        /*  $this->jobs_tasnif = $this->Web_m->get_jobs_tasnif();          $this->product_tasnif = $this->Web_m->get_product_tasnif();         */    }    public function messages($type, $text, $method = false)    {        $CI =& get_instance();        $CI->load->library("session");        if ($type == 'success') {            return $CI->session->set_flashdata('message', '<script  src="' . base_url() . 'assets/sweet_alert2/sweetalert2.js"></script><script  src="' . base_url() . 'assets/sweet_alert2/sweetalert2.all.js"></script><script  src="' . base_url() . 'assets/sweet_alert2/sweetalert2.all.min.js"></script><script> Swal.fire({                    icon:"success",                    title:"' . $text . '"                 })</script>');        } elseif ($type == 'warning') {            return $CI->session->set_flashdata('message', '<div class="alert alert-warning alert-dismissable"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a><strong>   !</strong> ' . $text . '.</div>');        } elseif ($type == 'error') {            return $CI->session->set_flashdata('message', '<div class="alert alert-danger alert-dismissable"><a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a><strong> !</strong> ' . $text . '.</div>');        }else{        }    }    public function index()    {        $data['title'] = translate_web('Home_Page');        $data['subview'] = 'web_v/home';        $data['about_us'] = $this->Web_m->get_about_us();        $data['projects'] = $this->Web_m->get_projects();        $data['blogs'] = $this->Web_m->get_blogs();        $data['video'] = $this->Web_m->get_video();        $this->load->view('template_web', $data);    }    public function about_us()    {        $data['title'] = translate_web('About_Us_Page');        $data['about_us'] = $this->Web_m->get_about_us();        $data['team'] = $this->Web_m->get_team();        $data['subview'] = 'web_v/about_us';        $this->load->view('template_web', $data);    }   /* public function contact_us()    {        $data['title'] = translate_web('contact_us');        $data['subview'] = 'web_v/contact';        $this->load->view('template_web', $data);    }*/    public function contact_us()    {        $this->load->model(['Msg_m']);        $this->load->helper(array('form', 'url'));        $this->load->library('form_validation');        if ($this->session->userdata('site_lang') && ($this->session->userdata('site_lang') == 'english')) {            $this->form_validation->set_message('required', 'Field is required!');        } else {            $this->form_validation->set_message('required', 'الحقل اجباري!');        }        $this->form_validation->set_rules('name', translate_web('Enter_Name'), 'required');        $this->form_validation->set_rules('email', translate_web('Enter_Email'), 'required');        $this->form_validation->set_rules('phone', translate_web('Enter_phone'), 'required');        if ($this->form_validation->run() == FALSE) {            $contact = new stdClass();            $contact->name = null;            $contact->email = null;            $contact->phone = null;            $contact->message = null;            $data = array(                'title' => translate_web('contact_us'),                'loader' => 'not',                'page' => 'add',                'all_contact' => $contact,                'subview' => 'web_v/contact',            );            $this->load->view('template_web', $data);        } else {            $post = $this->input->post(null, TRUE);            if (isset($_POST['add'])) {                $this->Msg_m->add_contact();            }            if ($this->db->affected_rows() > 0) {                $this->messages('success', translate_web('Message_Send_Successfully'));            }            redirect('contact_us', 'refresh');        }    }    function blogs()    {        $this->load->model(['News_m']);        $config = array();        $config["base_url"] = base_url() . "blogs";        $config["total_rows"] = $this->News_m->get_count(array());        /*        print_r($this->db->last_query());*/        $config["per_page"] = 12;        $config["uri_segment"] = 2;        /*coustom html */        $config['full_tag_open'] = '<ul class="pagination p-center">';        $config['full_tag_close'] = '</ul>';        $config['cur_tag_open'] = '<li class="page-item active"><a class="page-link">';        $config['cur_tag_close'] = '</a></li>';        $config['num_tag_open'] = '<li class="page-item "><a class="page-link">';        $config['num_tag_close'] = '</a></li>';        $config['prev_tag_open'] = '<li class="page-item "><a class="page-link">';        $config['prev_tag_close'] = '</a></li>';        $config['next_tag_open'] = '<li class="page-item "><a class="page-link">';        $config['next_tag_close'] = '</a></li>';        $config['num_links'] = 6;        $config['next_link'] = '<i class="fa-solid fa-arrow-right"></i>									<span class="sr-only">' . translate_web('Next') . '</span>';        $config['prev_link'] = '<i class=" fa-solid fa-arrow-left"></i>									<span class="sr-only">' . translate_web('Previous') . '</span>';        /*coustom html */        $this->pagination->initialize($config);        $page = ($this->uri->segment(2)) ? $this->uri->segment(2) : 0;        $data["links"] = $this->pagination->create_links();        $data['blogs'] = $this->News_m->get_all_blogs(array(), $config["per_page"], $page);        $data['subview'] = 'web_v/blog';        $this->load->view('template_web', $data);    }    function one_blog($event_id)    {        $this->load->model(['News_m']);        $event_id = base64_decode($event_id);        $data['one_blog'] = $this->News_m->get_one_blog(array('id' => $event_id));        if (empty($data['one_blog'])) {            access_denied();        } else {            $data['blogs'] = $this->News_m->get_all_blogs(array(), 10);            $data['subview'] = 'web_v/blog_detail';            /*		$this->load->view($data['subview'], $data);*/            $this->load->view('template_web', $data);        }    }    /*----------------------- start blog ------------------------------*/    /*----------------------- end blog ------------------------------*/    /*----------------------- start project ------------------------------*/    function projects()    {        $this->load->model(['Project_m']);        $config = array();        $config["base_url"] = base_url() . "projects";        $config["total_rows"] = $this->Project_m->get_count(array());        /*        print_r($this->db->last_query());*/        $config["per_page"] = 12;        $config["uri_segment"] = 2;        /*coustom html */        $config['full_tag_open'] = '<ul class="pagination p-center">';        $config['full_tag_close'] = '</ul>';        $config['cur_tag_open'] = '<li class="page-item active"><a class="page-link">';        $config['cur_tag_close'] = '</a></li>';        $config['num_tag_open'] = '<li class="page-item "><a class="page-link">';        $config['num_tag_close'] = '</a></li>';        $config['prev_tag_open'] = '<li class="page-item "><a class="page-link">';        $config['prev_tag_close'] = '</a></li>';        $config['next_tag_open'] = '<li class="page-item "><a class="page-link">';        $config['next_tag_close'] = '</a></li>';        $config['num_links'] = 6;        $config['next_link'] = '<i class="fa-solid fa-arrow-right"></i>									<span class="sr-only">' . translate_web('Next') . '</span>';        $config['prev_link'] = '<i class=" fa-solid fa-arrow-left"></i>									<span class="sr-only">' . translate_web('Previous') . '</span>';        /*coustom html */        $this->pagination->initialize($config);        $page = ($this->uri->segment(2)) ? $this->uri->segment(2) : 0;        $data["links"] = $this->pagination->create_links();        $data['projects'] = $this->Project_m->get_all_projects(array(), $config["per_page"], $page);        $data['subview'] = 'web_v/projects';        $this->load->view('template_web', $data);    }    function one_project($blog_id)    {        $this->load->model(['Project_m']);        $blog_id = base64_decode($blog_id);        $data['one_project'] = $this->Project_m->get_one_project(array('id' => $blog_id));        if (empty($data['one_project'])) {            access_denied();        } else {            $data['projects'] = $this->Project_m->get_all_projects(array(), 10);            $data['subview'] = 'web_v/project-details';            $this->load->view('template_web', $data);        }    }    /*----------------------- end project ------------------------------*/    /*  function send_comment()      {          $this->load->model(['News_m']);          $this->News_m->add_comment();          if ($this->db->affected_rows() > 0) {              $this->session->set_flashdata('success', 'تمت العملية بنجاح ');          }          redirect('one_blog/' . base64_encode($_POST['data']['blog_id']), 'refresh');      }*/    public function send_comment()    {        $this->load->model(['News_m']);        $this->load->helper(array('form', 'url'));        $this->load->library(array('form_validation'));        $this->form_validation->set_rules('data[name]', translate('user_name_comment'), 'required');        $this->form_validation->set_rules('data[email]', translate('user_email_comment'), 'required');        $this->form_validation->set_rules('data[comment]', translate('user_comment'), 'required');        if ($this->form_validation->run() == FALSE) {            $blog_id = $_POST['data']['blog_id'];            $data['one_blog'] = $this->News_m->get_one_blog(array('id' => $blog_id));            $data['blogs'] = $this->News_m->get_all_blogs(array(), 10);            $data['subview'] = 'web_v/blog_detail';            $this->load->view('template_web', $data);        } else {            $post = $this->input->post(null, TRUE);            if (isset($_POST['add'])) {                $this->News_m->add_comment();                if ($this->db->affected_rows() > 0) {                    $this->session->set_flashdata('success', 'تمت العملية بنجاح ');                }                redirect('one_blog/' . base64_encode($_POST['data']['blog_id']), 'refresh');            }        }    }}